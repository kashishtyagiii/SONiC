'use client'

import { useState } from 'react'
import Link from 'next/link'
import Image from 'next/image'
import { Menu, ChevronDown, X } from 'lucide-react'
import { Button } from "@/components/ui/button"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import { Sheet, SheetContent, SheetTrigger } from "@/components/ui/sheet"

const navItems = [
  {
    title: 'SONiC',
    items: [
      { title: 'Features', href: 'https://github.com/Azure/SONiC/wiki/Features-and-Roadmap' },
      { title: 'Architecture', href: 'https://github.com/sonic-net/SONiC/wiki/Architecture' },
      { title: 'Roadmap', href: 'https://github.com/sonic-net/SONiC/wiki/Sonic-Roadmap-Planning' },
      { title: 'Supported Devices And Platforms', href: '/Supported-Devices-and-Platforms' },
      { title: 'Source Code And License', href: 'https://github.com/sonic-net/SONiC/blob/master/sourcecode.md' },
    ],
  },
  {
    title: 'Users',
    items: [
      { title: 'Wiki', href: 'https://github.com/sonic-net/SONiC/wiki' },
      { title: 'Getting Started', href: 'https://github.com/sonic-net/SONiC/wiki/Quick-Start' },
      { title: 'Configuration', href: 'https://github.com/sonic-net/SONiC/wiki/Configuration' },
      { title: 'Command Reference', href: 'https://github.com/sonic-net/sonic-utilities/blob/master/doc/Command-Reference.md' },
      { title: 'FAQ', href: 'https://github.com/sonic-net/SONiC/wiki/FAQ' },
      { title: 'NewLetters', href: '/newsletters' },
    ],
  },
  {
    title: 'Developers',
    items: [
      { title: 'Developer Guide', href: 'https://github.com/sonic-net/SONiC/wiki/Developing-Guide' },
      { title: 'Building Guide', href: 'https://github.com/sonic-net/SONiC/wiki/Building-Guide' },
      { title: 'Testing Guide', href: 'https://github.com/sonic-net/SONiC/wiki/Testing-Guide' },
      { title: 'Technical FAQ', href: 'https://github.com/sonic-net/SONiC/wiki/technical_faq' },
    ],
  },
  {
    title: 'Community',
    items: [
      { title: 'Join Community', href: '/contact' },
      { title: 'Community Meeting Videos', href: 'https://www.opencompute.org/wiki/Networking/SONiC' },
      { title: 'Community Meeting Minutes', href: '/MoM' },
      { title: 'Workgroups', href: '/workgroups' },
      { title: 'How To Contribute', href: 'https://github.com/sonic-net/SONiC/wiki/Becoming-a-contributor' },
      { title: 'Governance', href: 'https://github.com/sonic-net/SONiC/blob/master/governance.md' },
      { title: 'SONiC Foundation Technical Charter', href: 'https://github.com/sonic-net/SONiC/blob/master/SONiC%20Foundation%20Technical%20Charter.pdf' },
      { title: 'Security Process', href: 'https://github.com/Azure/sonic-security' },
      { title: 'License & Logo', href: 'https://github.com/Azure/SONiC/wiki/SONiC-Logo-Image' },
      { title: 'Community Calendar', href: '/Calendar' },
    ],
  },
]

export default function Navigation() {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)

  return (
    <nav className="bg-white shadow" role="navigation">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between h-16">
          <div className="flex items-center">
            <Link href="/" className="flex-shrink-0">
              <Image src="/assets/img/logo.png" alt="SONiC Logo" width={120} height={40} priority />
            </Link>
          </div>
          <div className="hidden sm:ml-6 sm:flex sm:items-center">
            <Link href="/" className="px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50">
              Home
            </Link>
            {navItems.map((item) => (
              <DropdownMenu key={item.title}>
                <DropdownMenuTrigger asChild>
                  <Button variant="ghost" className="px-3 py-2 rounded-md text-sm font-medium">
                    {item.title} <ChevronDown className="ml-1 h-4 w-4" />
                  </Button>
                </DropdownMenuTrigger>
                <DropdownMenuContent>
                  {item.items.map((subItem) => (
                    <DropdownMenuItem key={subItem.title} asChild>
                      <Link href={subItem.href} className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        {subItem.title}
                      </Link>
                    </DropdownMenuItem>
                  ))}
                </DropdownMenuContent>
              </DropdownMenu>
            ))}
          </div>
          <div className="flex items-center sm:hidden">
            <Sheet open={isMobileMenuOpen} onOpenChange={setIsMobileMenuOpen}>
              <SheetTrigger asChild>
                <Button variant="ghost" className="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500">
                  <span className="sr-only">Open main menu</span>
                  {isMobileMenuOpen ? (
                    <X className="block h-6 w-6" aria-hidden="true" />
                  ) : (
                    <Menu className="block h-6 w-6" aria-hidden="true" />
                  )}
                </Button>
              </SheetTrigger>
              <SheetContent side="right" className="w-[80vw] sm:max-w-sm">
                <nav className="mt-5 px-2 space-y-1">
                  <Link href="/" className="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50">
                    Home
                  </Link>
                  {navItems.map((item) => (
                    <div key={item.title} className="space-y-1">
                      <h3 className="px-3 py-2 text-sm font-semibold text-gray-500 uppercase tracking-wider">
                        {item.title}
                      </h3>
                      {item.items.map((subItem) => (
                        <Link
                          key={subItem.title}
                          href={subItem.href}
                          className="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50"
                        >
                          {subItem.title}
                        </Link>
                      ))}
                    </div>
                  ))}
                </nav>
              </SheetContent>
            </Sheet>
          </div>
        </div>
      </div>
    </nav>
  )
}
